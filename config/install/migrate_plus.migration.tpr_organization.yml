status: true
dependencies:
  enforced:
    module:
      - helfi_tpr
id: tpr_organization
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags:
  - tpr
migration_group: tpr
label: 'TPR organization'
source:
  plugin: url
  urls: 'https://www.hel.fi/palvelukarttaws/rest/v4/organization/'
  data_fetcher_plugin: http
  data_parser_plugin: json
  item_selector: 0
  fields:
    -
      name: id
      selector: /id
    -
      name: name
      selector: /name_fi
    -
      name: name_fallback
      selector: /name_fi
    -
      name: phone
      selector: /phone
    -
      name: email
      selector: /email
    -
      name: street_address
      selector: /street_address_fi
    -
      name: address_city
      selector: /address_city_fi
    -
      name: address_postal_code
      selector: /address_zip
    -
      name: address_postal
      selector: /address_postal_full_fi
    -
      name: www
      selector: /www_fi
  ids:
    id:
      type: string
process:
  id: id
  name:
    plugin: substr
    source: name
    start: 0
    length: 255
  langcode:
    plugin: default_value
    default_value: fi
  address/postal_code: address_postal_code
  address/locality: address_city
  address/address_line1: street_address
  address/country_code:
    plugin: default_value
    default_value: FI
  address_postal: address_postal
  www/uri: www
  phone:
    plugin: explode
    source: phone
    delimiter: ','
  email: email
destination:
  plugin: 'entity:tpr_organization'
migration_dependencies: []
