langcode: en
status: true
dependencies:
  enforced:
    module:
      - helfi_tpr
id: tpr_unit
migration_tags:
  - tpr
label: 'TPR unit'
source:
  plugin: tpr_service_map
  translatable_fields:
    - name
    - call_charge_info
    - www
    - address_postal_full
    - street_address
    - address_city
    - desc
    - short_desc
  track_changes: true
  url: 'https://www.hel.fi/palvelukarttaws/rest/v4/unit/'
process:
  id: id
  name: name
  call_charge_info: call_charge_info
  www/uri: www
  description/value: desc
  description/summary: short_desc
  service_map_embed: id
  latitude: latitude
  longitude: longitude
  streetview_entrance_url/uri: streetview_entrance_url
  picture_url: picture_url
  description/format:
    plugin: default_value
    default_value: plain_text
  address_postal: address_postal_full
  address/address_line1: street_address
  address/locality: address_city
  address/postal_code: address_zip
  address/country_code:
    plugin: default_value
    default_value: FI
  phone:
    plugin: explode
    source: phone
    delimiter: ','
    strict: false
  changed:
    -
      plugin: format_date
      source: modified_time
      from_format: 'Y-m-d\TH:i:s'
      to_format: U
      from_timezone: Europe/Helsinki
      to_timezone: UTC
  created:
    plugin: format_date
    source: created_time
    from_format: 'Y-m-d\TH:i:s'
    to_format: U
    from_timezone: Europe/Helsinki
    to_timezone: UTC
destination:
  plugin: tpr_unit
migration_dependencies: {  }
