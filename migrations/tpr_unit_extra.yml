langcode: en
status: true
dependencies:
  enforced:
    module:
      - helfi_tpr
id: tpr_unit_extra
migration_tags:
  - tpr
label: 'TPR unit extra'
source:
  plugin: tpr_unit
  track_changes: true
  url: 'https://www.hel.fi/palvelukarttaws/rest/v4/unit/'
process:
  id: id
  opening_hours:
    plugin: sub_process
    source: connections
    process:
      # Only import opening hours
      skip:
        plugin: skip_on_value
        not_equals: true
        source: type
        value: OPENING_HOURS
        method: row
      value: value
      data: data
      type: type
  accessibility_sentences:
    plugin: sub_process
    source: accessibility_sentences
    process:
      value: sentence
      group: sentence_group
destination:
  plugin: tpr_unit
migration_dependencies:
  optional:
    - tpr_unit
